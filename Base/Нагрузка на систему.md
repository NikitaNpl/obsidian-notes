# Нагрузка на систему 2024-07-01

_Теги_: #ИС #Масштабируемость 

Нагрузку на систему можно описать с помощью нескольких числе, которые могут называться _параметрами нагрузки_. Оптимальный выбор таких параметров зависит от архитектуры системы. Это может быть количество запросов к веб-серверу в секунду, отношение количества операций чтения к количеству операций записей в базе данных, количество одновременно сидящих людей в комнате, частота обращений в кэш или что-то еще.

## Пример

Для того, чтобы прояснить идею, можно выбрать в качестве примера Twitter, задействовав данные на 2012 год. Две основные операции в Twitter были:

- публикация твита — пользователь может опубликовать новое сообщение для своих подписчиков (в среднем 4 600 з/с, пиковое значение — более 12 000 з/с);
- домашняя лента — пользователь может просматривать опубликованные твиты от пользователей, на которые он подписан (300 000 з/с).

Просто обработать 120 000 записей в секунду особо не составляет проблем. Проблема возникает на уровне _коэффициента разветвления по выходу_ — каждый пользователь подписан на многих людей и, в свою очередь, может иметь много подписчиков. Существует в общих чертах два способа реализации двух операций:

1. Публикация твита приводит к вставке нового твита в общий набор записей. И когда пользователь отправляет запрос к своей домашней ленте, выполняется поиск людей на которые человек подписан, поиск всех твиттов и их слияния.
2. Поддержка кэша для домашней ленты каждого пользователя. Когда пользователь публикует твит, выполняет поиск всех его подписчиков и вставка нового твита во все кэши домашних лент пользователей. При этом, запрос на чтение становится малозатратным.

Второй вариант выглядит намного лучше, поскольку средняя частота публикуемых твитов намного меньше, чем частота чтения домашних лент. Однако недостатком второго подхода является необходимость в значительном количестве дополнительных действий для публикации твита (увеличатся з/с в кэш).  